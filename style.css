/* reset / base */
*{box-sizing:border-box}
html,body{height:100%;margin:0;background:#000;color:#fff;font-family:system-ui,-apple-system,Segoe UI,Roboto,"Helvetica Neue",Arial}
.header{padding:20px 12px 6px;display:flex;align-items:center;justify-content:space-between}
.titleMain{font-size:40px;font-weight:800;letter-spacing:1px}
.hpwrap{width:56%;max-width:600px}
.hpbar{width:100%;height:14px;background:#222;border-radius:10px;overflow:hidden}
.bossHPbar{height:100%;width:100%;background:#e74c3c;transition:width 420ms cubic-bezier(.2,.9,.2,1)}

/* board */
.board{position:relative;width:100%;height:560px;margin:14px 0;overflow:hidden}

/* device base (absolute fixed layout) */
.device{position:absolute;background:#e6e6e6;color:#000;border-radius:14px;padding:10px;box-shadow:0 12px 30px rgba(0,0,0,0.5);transform:translate(-50%,-50%);display:flex;flex-direction:column;align-items:center}

/* terminals */
.terminal{width:34px;height:34px;background:#222;color:#fff;border-radius:50%;display:flex;align-items:center;justify-content:center;margin:6px;cursor:pointer;font-size:13px;user-select:none}
.termRow{display:flex;gap:10px;align-items:center}
.termCol{display:flex;flex-direction:column;gap:8px;align-items:center}

/* power */
.power{width:120px;height:64px}

/* switches */
.sw{width:120px;height:120px}
.swBtn{background:#fff;border-radius:10px;padding:8px 10px;border:none;cursor:pointer;margin-bottom:8px}

/* junction */
.junction{width:240px;height:86px;display:flex;flex-direction:column;align-items:center;justify-content:center}
.jbTitle{font-weight:700;margin-bottom:8px}
.jbRow{display:flex;gap:10px;align-items:center;justify-content:center}

/* lamps */
.lamp{width:96px;height:130px;border-radius:16px;padding-top:12px;display:flex;flex-direction:column;align-items:center;justify-content:space-between}
.lampBulb{width:44px;height:60px;background:#f2f2f2;border-radius:50% 50% 40% 40%;box-shadow:inset 0 6px 10px rgba(0,0,0,0.05)}
.lamp.lit{background:#ffd54a;box-shadow:0 0 60px #ffd54a}
.lamp.lit .lampBulb{background:#fff;filter:drop-shadow(0 12px 40px rgba(255,200,80,0.6))}

/* wire svg */
#wireLayer{position:absolute;left:0;top:0;width:100%;height:100%;pointer-events:none;z-index:10}

/* controls */
.controls{display:flex;gap:14px;align-items:center;justify-content:center;padding:20px}
.primary{background:#ffd000;border:none;padding:12px 28px;border-radius:28px;font-weight:800;cursor:pointer}
.ghost{background:#333;border:none;padding:10px 18px;border-radius:18px;cursor:pointer;color:#fff}

/* boss image */
.bossWrap{display:flex;align-items:center;justify-content:center;padding:18px}
#bossImg{width:160px;height:auto;border-radius:8px;transition:transform 360ms ease,opacity 360ms ease}

/* overlay */
.overlay{position:fixed;left:50%;top:50%;transform:translate(-50%,-50%);z-index:99999;background:rgba(0,0,0,0.8);color:#ffd200;padding:18px 24px;border-radius:12px;font-weight:800;font-size:22px}

/* boss effects styles (from earlier) */
@keyframes boss-shake {
  0% { transform: translate3d(0,0,0) rotate(0deg); }
  10% { transform: translate3d(-12px,6px,0) rotate(-2deg); }
  20% { transform: translate3d(10px,-6px,0) rotate(2deg); }
  30% { transform: translate3d(-8px,4px,0) rotate(-1.5deg); }
  40% { transform: translate3d(6px,-3px,0) rotate(1deg); }
  50% { transform: translate3d(-4px,2px,0) rotate(-0.5deg); }
  60% { transform: translate3d(2px,-1px,0) rotate(0.3deg); }
  100% { transform: translate3d(0,0,0) rotate(0deg); }
}
body.boss-shake{animation:boss-shake 700ms ease-in-out both}
#bossFlash{background: radial-gradient(circle at 50% 40%, rgba(255,255,255,0.95) 0%, rgba(255,220,150,0.85) 25%, rgba(255,100,50,0.7) 50%, rgba(0,0,0,0) 70%);opacity:0;transition:opacity 240ms ease}
#bossImg.boss-hit{transform-origin:50% 50%;animation:boss-hit-pulse 520ms ease-in-out;filter:drop-shadow(0 12px 40px rgba(231,76,60,0.6))}
@keyframes boss-hit-pulse {
  0% { transform: translateY(0) scale(1) rotate(0deg); }
  30% { transform: translateY(-6px) scale(1.06) rotate(-2deg); }
  60% { transform: translateY(2px) scale(0.98) rotate(1.5deg); filter: none; }
  100% { transform: translateY(0) scale(1) rotate(0deg); filter: none; }
}

/* particle generic */
.particle{position:absolute;pointer-events:none;will-change:transform,opacity;z-index:99995;mix-blend-mode:screen}

/* responsive tweaks */
@media (max-width:480px){
  .titleMain{font-size:28px}
  .device{padding:8px}
  .junction{width:200px}
  .lamp{width:80px;height:110px}
}
